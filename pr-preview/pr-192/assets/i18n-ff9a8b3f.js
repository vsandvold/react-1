var m={},v={};(function(r){/**
 * @file **unraw - errors.ts** | Error messages used by `unraw`.
 * @author Ian Sanders
 * @copyright 2019 Ian Sanders
 * @license MIT
 */Object.defineProperty(r,"__esModule",{value:!0});var e;(function(t){t.MalformedUnicode="MALFORMED_UNICODE",t.MalformedHexadecimal="MALFORMED_HEXADECIMAL",t.CodePointLimit="CODE_POINT_LIMIT",t.OctalDeprecation="OCTAL_DEPRECATION",t.EndOfString="END_OF_STRING"})(e=r.ErrorType||(r.ErrorType={})),r.errorMessages=new Map([[e.MalformedUnicode,"malformed Unicode character escape sequence"],[e.MalformedHexadecimal,"malformed hexadecimal character escape sequence"],[e.CodePointLimit,"Unicode codepoint must not be greater than 0x10FFFF in escape sequence"],[e.OctalDeprecation,'"0"-prefixed octal literals and octal escape sequences are deprecated; for octal literals use the "0o" prefix instead'],[e.EndOfString,"malformed escape sequence at end of string"]])})(v);/**
 * @file **unraw** | Convert raw escape sequences to their respective characters
 * (undo `String.raw`).
 * @author Ian Sanders
 * @copyright 2019 Ian Sanders
 * @license MIT
 */Object.defineProperty(m,"__esModule",{value:!0});const c=v;m.ErrorType=c.ErrorType;m.errorMessages=c.errorMessages;function U(r){return!r.match(/[^a-f0-9]/i)?parseInt(r,16):NaN}function _(r,e,t){const n=U(r);if(Number.isNaN(n)||t!==void 0&&t!==r.length)throw new SyntaxError(c.errorMessages.get(e));return n}function P(r){const e=_(r,c.ErrorType.MalformedHexadecimal,2);return String.fromCharCode(e)}function w(r,e){const t=_(r,c.ErrorType.MalformedUnicode,4);if(e!==void 0){const n=_(e,c.ErrorType.MalformedUnicode,4);return String.fromCharCode(t,n)}return String.fromCharCode(t)}function H(r){return r.charAt(0)==="{"&&r.charAt(r.length-1)==="}"}function j(r){if(!H(r))throw new SyntaxError(c.errorMessages.get(c.ErrorType.MalformedUnicode));const e=r.slice(1,-1),t=_(e,c.ErrorType.MalformedUnicode);try{return String.fromCodePoint(t)}catch(n){throw n instanceof RangeError?new SyntaxError(c.errorMessages.get(c.ErrorType.CodePointLimit)):n}}function R(r,e=!1){if(e)throw new SyntaxError(c.errorMessages.get(c.ErrorType.OctalDeprecation));const t=parseInt(r,8);return String.fromCharCode(t)}const q=new Map([["b","\b"],["f","\f"],["n",`
`],["r","\r"],["t","	"],["v","\v"],["0","\0"]]);function $(r){return q.get(r)||r}const G=/\\(?:(\\)|x([\s\S]{0,2})|u(\{[^}]*\}?)|u([\s\S]{4})\\u([^{][\s\S]{0,3})|u([\s\S]{0,4})|([0-3]?[0-7]{1,2})|([\s\S])|$)/g;function A(r,e=!1){return r.replace(G,function(t,n,i,s,o,a,l,f,d){if(n!==void 0)return"\\";if(i!==void 0)return P(i);if(s!==void 0)return j(s);if(o!==void 0)return w(o,a);if(l!==void 0)return w(l);if(f==="0")return"\0";if(f!==void 0)return R(f,!e);if(d!==void 0)return $(d);throw new SyntaxError(c.errorMessages.get(c.ErrorType.EndOfString))})}m.unraw=A;var k=m.default=A;const u=r=>typeof r=="string",z=r=>typeof r=="function",S=new Map;function C(r){return[...Array.isArray(r)?r:[r],"en"]}function I(r,e,t){const n=C(r);return g(()=>p("date",n,t),()=>new Intl.DateTimeFormat(n,t)).format(u(e)?new Date(e):e)}function E(r,e,t){const n=C(r);return g(()=>p("number",n,t),()=>new Intl.NumberFormat(n,t)).format(e)}function D(r,e,t,{offset:n=0,...i}){const s=C(r),o=e?g(()=>p("plural-ordinal",s),()=>new Intl.PluralRules(s,{type:"ordinal"})):g(()=>p("plural-cardinal",s),()=>new Intl.PluralRules(s,{type:"cardinal"}));return i[t]??i[o.select(t-n)]??i.other}function g(r,e){const t=r();let n=S.get(t);return n||(n=e(),S.set(t,n)),n}function p(r,e,t){const n=e.join("-");return`${r}-${n}-${JSON.stringify(t)}`}const T=/\\u[a-fA-F0-9]{4}|\\x[a-fA-F0-9]{2}/g,B=(r,e,t={})=>{e=e||r;const n=s=>u(s)?t[s]||{style:s}:s,i=(s,o)=>{const a=Object.keys(t).length?n("number"):{},l=E(e,s,a);return o.replace("#",l)};return{plural:(s,o)=>{const{offset:a=0}=o,l=D(e,!1,s,o);return i(s-a,l)},selectordinal:(s,o)=>{const{offset:a=0}=o,l=D(e,!0,s,o);return i(s-a,l)},select:(s,o)=>o[s]??o.other,number:(s,o)=>E(e,s,n(o)),date:(s,o)=>I(e,s,n(o)),undefined:s=>s}};function J(r,e,t){return(n,i={})=>{const s=B(e,t,i),o=l=>Array.isArray(l)?l.reduce((f,d)=>{if(u(d))return f+d;const[F,N,h]=d;let y={};h!=null&&!u(h)?Object.keys(h).forEach(O=>{y[O]=o(h[O])}):y=h;const M=s[N](n[F],y);return M==null?f:f+M},""):l,a=o(r);return u(a)&&T.test(a)?k(a.trim()):u(a)?a.trim():a}}class K{constructor(){this._events={}}on(e,t){return this._hasEvent(e)||(this._events[e]=[]),this._events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){if(!this._hasEvent(e))return;const n=this._events[e].indexOf(t);~n&&this._events[e].splice(n,1)}emit(e,...t){this._hasEvent(e)&&this._events[e].map(n=>n.apply(this,t))}_hasEvent(e){return Array.isArray(this._events[e])}}class X extends K{constructor(e){super(),this.t=this._.bind(this),this._messages={},this._localeData={},e.missing!=null&&(this._missing=e.missing),e.messages!=null&&this.load(e.messages),e.localeData!=null&&this.loadLocaleData(e.localeData),(e.locale!=null||e.locales!=null)&&this.activate(e.locale,e.locales)}get locale(){return this._locale}get locales(){return this._locales}get messages(){return this._messages[this._locale]??{}}get localeData(){return this._localeData[this._locale]??{}}_loadLocaleData(e,t){this._localeData[e]==null?this._localeData[e]=t:Object.assign(this._localeData[e],t)}loadLocaleData(e,t){t!=null?this._loadLocaleData(e,t):Object.keys(e).forEach(n=>this._loadLocaleData(n,e[n])),this.emit("change")}_load(e,t){this._messages[e]==null?this._messages[e]=t:Object.assign(this._messages[e],t)}load(e,t){t!=null?this._load(e,t):Object.keys(e).forEach(n=>this._load(n,e[n])),this.emit("change")}loadAndActivate({locale:e,locales:t,messages:n}){this._locale=e,this._locales=t||void 0,this._messages[this._locale]=n,this.emit("change")}activate(e,t){this._locale=e,this._locales=t,this.emit("change")}_(e,t={},{message:n,formats:i}={}){u(e)||(t=e.values||t,n=e.message,e=e.id);const s=!this.messages[e],o=this._missing;if(o&&s)return z(o)?o(this._locale,e):o;s&&this.emit("missing",{id:e,locale:this._locale});let a=this.messages[e]||n||e;return u(a)&&T.test(a)?JSON.parse(`"${a}"`):u(a)?a:J(a,this._locale,this._locales)(t,i)}date(e,t){return I(this._locales||this._locale,e,t)}number(e,t){return E(this._locales||this._locale,e,t)}}function Q(r={}){return new X(r)}const b=Q(),V=["en","nb","fi"],x="en",L=r=>V.find(e=>r===e||r.toLowerCase().includes(e))||x;function Y(){if(typeof window>"u"){const r={}.NMP_LANGUAGE||Intl.DateTimeFormat().resolvedOptions().locale;return L(r)}try{const r=document.documentElement.lang;return L(r)}catch(r){return console.warn("could not detect locale, falling back to source locale",r),x}}const Z=(r,e,t,n)=>r==="nb"?t:r==="fi"?n:e,W=(r,e,t)=>{const n=Y(),i=Z(n,r,e,t);b.load(n,i),b.activate(n)};export{W as a,b as i};
