{"version":3,"file":"Tabs.stories-18e3ba32.js","sources":["../../packages/tabs/src/component-tab.tsx","../../packages/tabs/src/component-tab-panel.tsx","../../packages/tabs/src/utils.ts","../../packages/tabs/src/component-tabs.tsx"],"sourcesContent":["import React from 'react';\nimport { classNames } from '@chbphone55/classnames';\nimport { tab as ccTab } from '@warp-ds/css/component-classes';\nimport type { TabProps } from './props.js';\n\nconst setup = ({ className, isActive, setActive, ...rest }: any) => ({\n  tab: classNames(ccTab.tab, {\n    [className]: !!className,\n    [ccTab.tabActive]: isActive,\n  }),\n  icon: classNames(ccTab.icon, {\n    [ccTab.iconUnderlinedActive] : isActive,\n  }),\n  content: classNames(ccTab.contentUnderlined, {\n    [ccTab.contentUnderlinedActive]: isActive,\n  }),\n  attrs: { ...rest },\n});\n\nexport function Tab(props: TabProps) {\n  const {\n    children,\n    label,\n    setActive = () => {},\n    name,\n    onClick,\n    isActive,\n  } = props;\n  const { tab, icon, content, attrs } = setup(props);\n  const { over, ...rest } = attrs;\n\n  const handleClick = (e) => {\n    setActive(name);\n    onClick && onClick(e);\n  };\n\n  return (\n    <button\n      type=\"button\"\n      {...rest}\n      role=\"tab\"\n      aria-selected={isActive ? 'true' : 'false'}\n      aria-controls={isActive ? `warp-tabpanel-${name}` : undefined}\n      id={`warp-tab-${name}`}\n      tabIndex={isActive ? 0 : -1}\n      className={tab}\n      onClick={handleClick}\n    >\n      {!children && <span className={content}>{label}</span>}\n\n      {children && over && (\n        <>\n          <span className={icon}>{children}</span>\n          <span className={content}>{label}</span>\n        </>\n      )}\n\n      {children && !over && (\n        <div className={ccTab.content}>\n          {children}\n          {label}\n        </div>\n      )}\n    </button>\n  );\n}\n","import React from 'react';\nimport { tab as ccTab } from '@warp-ds/css/component-classes';\nimport type { TabPanelProps } from './props.js';\n\nexport function TabPanel(props: TabPanelProps) {\n  const { children, name, hidden, ...rest } = props;\n\n  return (\n    <div\n      tabIndex={-1}\n      {...rest}\n      role=\"tabpanel\"\n      aria-labelledby={`warp-tab-${name}`}\n      id={`warp-tabpanel-${name}`}\n      hidden={\n        hidden === undefined && typeof document === 'object'\n          ? !document\n              ?.getElementById(`warp-tab-${name}`)\n              ?.classList?.contains(ccTab.tabActive)\n          : hidden\n      }\n    >\n      {children}\n    </div>\n  );\n}\n","export function debounce(func, wait = 200, immediate = false) {\n  let timeout;\n  return function () {\n    var later = () => {\n      timeout = null;\n      // @ts-ignore\n      if (!immediate) func.apply(this, arguments);\n    };\n    let callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    // @ts-ignore\n    if (callNow) func.apply(this, arguments);\n  };\n}\n","import React, {\n  useState,\n  useRef,\n  useEffect,\n  cloneElement,\n  Children,\n  RefObject,\n} from 'react';\nimport { classNames } from '@chbphone55/classnames';\nimport { gridLayout, tabs as ccTabs } from '@warp-ds/css/component-classes';\nimport { debounce } from './utils.js';\nimport type { TabsProps } from './props.js';\n\nconst setup = (\n  { className, children, onClick, active, ...rest }: any,\n  tabsRef,\n  wunderbarRef\n) => ({\n  nav: classNames(ccTabs.wrapperUnderlined, {\n    [className]: !!className,\n  }),\n  div: classNames(ccTabs.tabContainer,{\n    [gridLayout[`cols${children.length}`]]: true,\n  }),\n  wunderbar: classNames(ccTabs.wunderbar),\n  attrs: rest,\n  updateWunderbar: () => {\n    window.requestAnimationFrame(() => {\n      if (tabsRef.current && wunderbarRef.current) {\n        const activeEl = tabsRef.current.querySelector(\n          'button[role=\"tab\"][aria-selected=\"true\"]'\n        );\n        if (activeEl) {\n          const parentLeft = tabsRef.current.getBoundingClientRect().left;\n          const { left, width } = activeEl.getBoundingClientRect();\n          wunderbarRef.current.style.left = `${left - parentLeft}px`;\n          wunderbarRef.current.style.width = `${width}px`;\n        }\n      }\n    });\n  },\n});\n\nexport const Tabs = (props: TabsProps) => {\n  const isBrowser = Boolean(\n    typeof document === 'object' && document?.createElement\n  );\n  const tabsRef: RefObject<HTMLDivElement> = useRef(null);\n  const wunderbarRef = useRef(null);\n  const { children, onChange } = props;\n  const { nav, div, wunderbar, attrs, updateWunderbar } = setup(\n    props,\n    tabsRef,\n    wunderbarRef\n  );\n\n  useEffect(() => {\n    // Server-side rendering must handle TabPanel state manually (outside the Tabs component).\n    isBrowser && updatePanels();\n    updateWunderbar();\n    const updateDebounced = debounce(updateWunderbar, 100);\n    window.addEventListener('resize', updateDebounced);\n    return () => window.removeEventListener('resize', updateDebounced);\n  });\n\n  const findActive = (): string => {\n    if (props.active) {\n      return String(props.active);\n    } else if (Children.count(children) > 0) {\n      const childrenArray = Children.toArray(children);\n      const activeChild =\n        childrenArray?.find(\n          // @ts-ignore: semantic error\n          (child) => child?.props?.isActive\n        ) || childrenArray[0];\n      // @ts-ignore: semantic error\n      return String(activeChild?.props?.name || '');\n    }\n    return '';\n  };\n  const [active, setActive] = useState(findActive());\n\n  const updatePanels = () => {\n    Children.forEach(children, (child) => {\n      if (typeof child === 'object') {\n        const panel = document.getElementById(\n          // @ts-ignore: semantic error\n          `warp-tabpanel-${child?.props?.name}`\n        );\n        if (panel) {\n          // @ts-ignore: semantic error\n          panel.hidden = child?.props?.name !== active;\n        }\n      }\n    });\n  };\n\n  const change = (name) => {\n    setActive(name);\n    updateWunderbar();\n    onChange && onChange(name);\n  };\n\n  const handleKeyDown = (event) => {\n    if (\n      !event.altKey &&\n      !event.ctrlKey &&\n      !event.shiftKey &&\n      ['ArrowLeft', 'ArrowRight', 'Home', 'End'].includes(event.key)\n    ) {\n      const tabs:HTMLButtonElement[] = Array.from(tabsRef?.current?.querySelectorAll('button[role=\"tab\"]') ?? []);\n      const activeTabIndex = tabs.findIndex((tab) => tab.name === active);\n      if (activeTabIndex >= 0) {\n        const nextIndex = (() => {\n          switch (event.key) {\n            case 'Home':\n              return 0;\n            case 'End':\n              return tabs.length - 1;\n            case 'ArrowLeft':\n              return Math.max(0, activeTabIndex - 1);\n            case 'ArrowRight':\n              return Math.min(tabs.length - 1, activeTabIndex + 1);\n            default:\n              return activeTabIndex;\n          }\n        })();\n        if (activeTabIndex !== nextIndex && tabs[nextIndex]?.name) {\n          event.preventDefault();\n          change(tabs[nextIndex].name);\n          tabs[nextIndex].focus();\n        }\n      }\n    }\n  };\n\n  return (\n    <div {...attrs} className={nav}>\n      <div\n        role=\"tablist\"\n        className={div}\n        ref={tabsRef}\n        onKeyDown={handleKeyDown}\n      >\n        {Children.map(children, (child: any) => {\n          return child && cloneElement(child, {\n            setActive: change,\n            isActive: child?.props?.name === active,\n          });\n        })}\n        {<span className={wunderbar} ref={wunderbarRef} />}\n      </div>\n    </div>\n  );\n};\n"],"names":["setup","className","isActive","setActive","rest","classNames","ccTab","Tab","props","children","label","name","onClick","tab","icon","content","attrs","over","handleClick","e","jsxs","jsx","Fragment","TabPanel","hidden","_b","_a","debounce","func","wait","immediate","timeout","later","callNow","active","tabsRef","wunderbarRef","ccTabs","gridLayout","activeEl","parentLeft","left","width","Tabs","isBrowser","useRef","onChange","nav","div","wunderbar","updateWunderbar","useEffect","updatePanels","updateDebounced","findActive","Children","childrenArray","activeChild","child","useState","panel","change","handleKeyDown","event","tabs","activeTabIndex","nextIndex","cloneElement"],"mappings":"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"}